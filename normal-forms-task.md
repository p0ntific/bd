# Нарушения НФ и нормализация отношений

## 1. Таблица "Книги"

**ТАБЛИЦА:**
Книги (Название_книги, Автор, Страна_проживания_автора, Название_библиотеки)

**НАРУШЕНИЕ НФ:**
3НФ 

**ПРИЧИНА:**
Транзитивная зависимость: страна проживания зависит от автора

**ПОЯСНЕНИЕ:**
Атрибут "Страна_проживания_автора" функционально зависит от "Автор", а не от первичного ключа таблицы. Образуется цепочка зависимостей: Книга → Автор → Страна. Это классическая транзитивная зависимость, которая нарушает 3НФ.

**НОРМАЛИЗАЦИЯ:**
- Книги (ID_книги, Название_книги, ID_автора, ID_библиотеки)
- Авторы (ID_автора, Имя_автора, ID_страны)
- Страны (ID_страны, Название_страны)
- Библиотеки (ID_библиотеки, Название_библиотеки)

---

## 2. Таблица "Заказы" (интернет-магазин)

**ТАБЛИЦА:**
Заказы (Номер_заказа, Название_товара, Количество_товара, Имя_клиента, Адрес_клиента)

**НАРУШЕНИЕ НФ:**
1НФ и 2НФ

**ПРИЧИНА:**
Множественные товары в одном заказе + данные клиента зависят не от полного ключа

**ПОЯСНЕНИЕ:**
Нарушение 1НФ: один заказ может содержать несколько товаров, что приводит к повторяющимся группам или множественным значениям в одной ячейке. Нарушение 2НФ: если использовать составной ключ (Номер_заказа, Название_товара), то атрибуты "Имя_клиента" и "Адрес_клиента" зависят только от части ключа (Номер_заказа), а не от всего ключа целиком.

**НОРМАЛИЗАЦИЯ:**
- Заказы (Номер_заказа, ID_клиента, Дата_заказа)
- Состав_заказа (Номер_заказа, ID_товара, Количество)
- Товары (ID_товара, Название_товара, Цена)
- Клиенты (ID_клиента, Имя_клиента, Адрес_клиента)

---

## 3. Таблица "Клиенты"

**ТАБЛИЦА:**
Клиенты (ID_клиента, Имя_клиента, Регион_клиента, Город_клиента, Почтовый_индекс)

**НАРУШЕНИЕ НФ:**
3НФ 

**ПРИЧИНА:**
Транзитивные зависимости: регион зависит от города, индекс зависит от города

**ПОЯСНЕНИЕ:**
Атрибут "Регион_клиента" функционально зависит от "Город_клиента", а "Почтовый_индекс" также зависит от города. Образуется цепочка: Клиент → Город → Регион/Индекс. Это транзитивные зависимости, которые приводят к избыточности данных и аномалиям при обновлении.

**НОРМАЛИЗАЦИЯ:**
- Клиенты (ID_клиента, Имя_клиента, ID_города)
- Города (ID_города, Название_города, Почтовый_индекс, ID_региона)
- Регионы (ID_региона, Название_региона)

---

## 4. Таблица "Заказы" (с НДС)

**ТАБЛИЦА:**
Заказы (Номер_заказа, Цена_без_НДС, НДС)

**НАРУШЕНИЕ НФ:**
3НФ

**ПРИЧИНА:**
Вычисляемое поле - производный атрибут

**ПОЯСНЕНИЕ:**
Если "НДС" представляет собой сумму налога (вычисляемую как Цена_без_НДС × Ставка_НДС), то это производный атрибут, который можно вычислить из других данных. Хранение вычисляемых значений нарушает принцип минимизации избыточности и может привести к несогласованности данных при обновлении цены.

**НОРМАЛИЗАЦИЯ:**
- Заказы (Номер_заказа, Цена_без_НДС, Ставка_НДС)

Примечание: Сумму НДС следует вычислять в запросах динамически:
SELECT Номер_заказа, Цена_без_НДС, (Цена_без_НДС * Ставка_НДС) AS Сумма_НДС

---

## 5. Таблица "Проект"

**ТАБЛИЦА:**
Проект (ID_проекта, Направление, Куратор)

**НАРУШЕНИЕ НФ:**
3НФ

**ПРИЧИНА:**
Направление функционально зависит от куратора

**ПОЯСНЕНИЕ:**
Поскольку каждый куратор может курировать только одно направление, атрибут "Направление" функционально зависит от "Куратор", а не от первичного ключа "ID_проекта". Зависимость: Проект → Куратор → Направление. Это транзитивная зависимость.

**НОРМАЛИЗАЦИЯ:**
- Проекты (ID_проекта, Название_проекта, ID_куратора)
- Кураторы (ID_куратора, ФИО_куратора, ID_направления)
- Направления (ID_направления, Название_направления)

---

## 6. Таблица "Студент"

**ТАБЛИЦА:**
Студент (ID_студента, Посещаемый_курс, Хобби)

**НАРУШЕНИЕ НФ:**
1НФ 

**ПРИЧИНА:**
Множественные значения в атрибутах (несколько курсов и хобби)

**ПОЯСНЕНИЕ:**
Один студент может посещать несколько курсов и иметь несколько хобби. Если эти данные хранятся в одной ячейке (например, списком через запятую), нарушается требование атомарности данных - основной принцип 1НФ. Каждая ячейка должна содержать только одно неделимое значение.

**НОРМАЛИЗАЦИЯ:**
- Студенты (ID_студента, Имя_студента, Группа)
- Курсы (ID_курса, Название_курса)
- Студент_Курс (ID_студента, ID_курса) — связь многие-ко-многим
- Хобби (ID_хобби, Название_хобби)
- Студент_Хобби (ID_студента, ID_хобби) — связь многие-ко-многим

---

## 7. Таблица "Сотрудник-Проект"

**ТАБЛИЦА:**
(Сотрудник, Проект, Вид_участия)

**НАРУШЕНИЕ НФ:**
1НФ 

**ПРИЧИНА:**
Множественные связи - один сотрудник может участвовать в нескольких проектах с разными видами участия

**ПОЯСНЕНИЕ:**
Один сотрудник может одновременно участвовать в нескольких проектах (магазин, офис, ИАС), и в каждом проекте иметь разный вид участия (разработка, администрирование, контроль). Если пытаться хранить все проекты и виды участия в одной записи сотрудника, это нарушает атомарность данных и требование 1НФ.

**НОРМАЛИЗАЦИЯ:**
- Сотрудники (ID_сотрудника, ФИО_сотрудника, Должность)
- Проекты (ID_проекта, Название_проекта, Описание)
- Виды_участия (ID_вида, Название_вида)
- Участие (ID_сотрудника, ID_проекта, ID_вида, Дата_начала, Дата_окончания)
  PRIMARY KEY (ID_сотрудника, ID_проекта, ID_вида)
